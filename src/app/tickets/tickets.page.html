<ion-header>
  <ion-toolbar>
    <ion-title>Help Us</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-card>
    <ion-card-header>
      <ion-card-title>
        Create A New Ticket
      </ion-card-title>
    </ion-card-header>
    <ion-card-content >
      <form [formGroup]="newTicketForm" ngxsForm="tickets.newTicketForm" (ngSubmit)="onSubmit()">
        <ion-input type="text" formControlName="ticketDescription" required placeholder="Enter Ticket Description"></ion-input>
        <ion-button type="submit" color="success" [disabled]="!newTicketForm.valid">Save</ion-button>
      </form>
    </ion-card-content>
  </ion-card>
  <ion-card>
    <ion-card-content>
      <ion-label>
        Search Tickets
      </ion-label>
      <ion-searchbar></ion-searchbar>
    </ion-card-content>
  </ion-card>
  <ion-card *ngIf="!tickets.length">
    <ion-card-header>
      <ion-card-title>
        <h2>
          <ion-skeleton-text animated style="width: 50%"></ion-skeleton-text>
        </h2>
      </ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <p>
        <ion-skeleton-text animated style="width: 20%"></ion-skeleton-text>
      </p>
      <p>
        <ion-skeleton-text animated style="width: 20%"></ion-skeleton-text>
      </p>
      <p>
        <ion-skeleton-text animated style="width: 20%"></ion-skeleton-text>
      </p>
    </ion-card-content>
  </ion-card>
  <ion-card *ngFor="let ticket of tickets">
    <ion-card-header>
      <ion-card-title>
        <h2>
          {{ticket.description}}
        </h2>
      </ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <p>
        Assigned: {{ticket.assigneeId}}
      </p>
      <p>
        Ticket Number: {{ticket.id}}
      </p>
      <p>
        Completed: {{ticket.completed}}
      </p>
      <ion-button color="warning" (click)="editTicket(ticket)">
        <ion-icon slot="icon-only" name="pencil"></ion-icon>
      </ion-button>
    </ion-card-content>
  </ion-card>
</ion-content>